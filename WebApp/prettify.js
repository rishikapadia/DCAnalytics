var BLUEGRADIENT="\ background: -moz-linear-gradient(top,  #1e5799 0%, #2989d8 50%, #207cca 51%, #7db9e8 100%); /* FF3.6+ */\
				background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#1e5799), color-stop(50%,#2989d8), color-stop(51%,#207cca), color-stop(100%,#7db9e8)); /* Chrome,Safari4+ */\
				background: -webkit-linear-gradient(top,  #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* Chrome10+,Safari5.1+ */\
				background: -o-linear-gradient(top,  #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* Opera 11.10+ */\
				background: -ms-linear-gradient(top,  #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* IE10+ */\
				background: linear-gradient(to bottom,  #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* W3C */\
				filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=0 ); /* IE6-9 */\
				"
var GOLDGRADIENT="\
				background: #33ffff; /* Old browsers */\
				background: -moz-linear-gradient(top,  #33ffff 0%, #d8782a 0%, #ca6f20 51%, #e8ac7e 100%); /* FF3.6+ */\
				background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#33ffff), color-stop(0%,#d8782a), color-stop(51%,#ca6f20), color-stop(100%,#e8ac7e)); /* Chrome,Safari4+ */\
				background: -webkit-linear-gradient(top,  #33ffff 0%,#d8782a 0%,#ca6f20 51%,#e8ac7e 100%); /* Chrome10+,Safari5.1+ */\
				background: -o-linear-gradient(top,  #33ffff 0%,#d8782a 0%,#ca6f20 51%,#e8ac7e 100%); /* Opera 11.10+ */\
				background: -ms-linear-gradient(top,  #33ffff 0%,#d8782a 0%,#ca6f20 51%,#e8ac7e 100%); /* IE10+ */\
				background: linear-gradient(to bottom,  #33ffff 0%,#d8782a 0%,#ca6f20 51%,#e8ac7e 100%); /* W3C */\
				filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#33ffff', endColorstr='#e8ac7e',GradientType=0 ); /* IE6-9 */\
				"
var GREENGRADIENT="\
				background: #5533ff; /* Old browsers */\
				background: -moz-linear-gradient(top,  #5533ff 0%, #6dd82a 0%, #5eca20 51%, #a8e87e 100%); /* FF3.6+ */\
				background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#5533ff), color-stop(0%,#6dd82a), color-stop(51%,#5eca20), color-stop(100%,#a8e87e)); /* Chrome,Safari4+ */\
				background: -webkit-linear-gradient(top,  #5533ff 0%,#6dd82a 0%,#5eca20 51%,#a8e87e 100%); /* Chrome10+,Safari5.1+ */\
				background: -o-linear-gradient(top,  #5533ff 0%,#6dd82a 0%,#5eca20 51%,#a8e87e 100%); /* Opera 11.10+ */\
				background: -ms-linear-gradient(top,  #5533ff 0%,#6dd82a 0%,#5eca20 51%,#a8e87e 100%); /* IE10+ */\
				background: linear-gradient(to bottom,  #5533ff 0%,#6dd82a 0%,#5eca20 51%,#a8e87e 100%); /* W3C */\
				filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#5533ff', endColorstr='#a8e87e',GradientType=0 ); /* IE6-9 */\
				"
var REDGRADIENT="\
				background: #00dc9a; /* Old browsers */\
				background: -moz-linear-gradient(top,  #00dc9a 0%, #ba1c00 0%, #a81c00 51%, #ff2503 100%); /* FF3.6+ */\
				background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#00dc9a), color-stop(0%,#ba1c00), color-stop(51%,#a81c00), color-stop(100%,#ff2503)); /* Chrome,Safari4+ */\
				background: -webkit-linear-gradient(top,  #00dc9a 0%,#ba1c00 0%,#a81c00 51%,#ff2503 100%); /* Chrome10+,Safari5.1+ */\
				background: -o-linear-gradient(top,  #00dc9a 0%,#ba1c00 0%,#a81c00 51%,#ff2503 100%); /* Opera 11.10+ */\
				background: -ms-linear-gradient(top,  #00dc9a 0%,#ba1c00 0%,#a81c00 51%,#ff2503 100%); /* IE10+ */\
				background: linear-gradient(to bottom,  #00dc9a 0%,#ba1c00 0%,#a81c00 51%,#ff2503 100%); /* W3C */\
				filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#00dc9a', endColorstr='#ff2503',GradientType=0 ); /* IE6-9 */\
				"
var DIVTEMPLATE='\
				<div style="{1}width:50%;height:5em;color:black;border:1px solid gray; border-radius:15px; background-color:#ff0000;position:relative; vertical-align:middle;">\
				<div style="width:35%;float:left;">\
				<h1>\
				&nbsp {0}\
				</h1>\
				</div>\
				<div style="width:15%; float:right;">\
				<table>\
				<tr><td>Dinner</td></tr>\
				<tr><td bgcolor="white" align="center" height="40px">{4}</td></tr>\
				</table>\
				</div>\
				<div style="width:15%; float:right;">\
				<table>\
				<tr><td>Lunch</td></tr>\
				<tr><td bgcolor="white" align="center" height="40px">{3}</td></tr>\
				</table>\
				</div>\
				<div style="width:15%; float:right;">\
				<table>\
				<tr><td>Breakfast</td></tr>\
				<tr><td bgcolor="white" align="center" height="40px">{2}</td></tr>\
				</table>\
				</div>\
				</div>\
				'


var gradient = {"Foothill":BLUEGRADIENT, 
			"CKC":GOLDGRADIENT, 
			"Cafe 3":GREENGRADIENT, 
			"Crossroads":REDGRADIENT}




//credits: http://stackoverflow.com/questions/610406/javascript-equivalent-to-printf-string-format
if (!String.prototype.format) {
  String.prototype.format = function() {
    var args = arguments;
    return this.replace(/{(\d+)}/g, function(match, number) { 
          return typeof args[number] != 'undefined'
        ? args[number]
        : match
      ;
    });
  };
}


function generateUserDisplayHTML(mealsResults){
    var html = "<center>";
	for (var site in mealsResults)
	{
		html+="<br/>"
		html += generateHTML(site, mealsResults[site]["breakfast"], mealsResults[site]["lunch"], mealsResults[site]["dinner"]);
	}
	return html + "</center>"
}	


function generateHTML(DCSite, brating, lrating, drating){
	var grad = gradient[DCSite];
	return DIVTEMPLATE.format(DCSite, grad, brating, lrating, drating);
}



function appendUserDisplayHTML(html){
	document.getElementById("userdisplay").innerHTML=html;
}

function analyze(mealsResults){
	appendUserDisplayHTML(generateUserDisplayHTML(mealsResults));
}
